## start of cobbler network_config generated code
#if $getVar("system_name","") != ""
    #set ikeys = $interfaces.keys()
    #import re
    #for $iname in $ikeys
        #set $idata = $interfaces[$iname]
        ## Ignore BMC interface
        #if $idata["interface_type"].lower() == "bmc"
            #continue
        #end if
    #end for
    #for $iname in $ikeys
        #set $idata    = $interfaces[$iname]
        #set $mac      = $idata["mac_address"]
        #set $static   = $idata["static"]
        #set $ip       = $idata["ip_address"]
        #set $netmask  = $idata["netmask"]
        #set $type     = $idata["interface_type"]
        ## Ignore BMC interface
        #if $type == "bmc"
            #continue
        #end if
        #if $mac != ""
            #if $static == True:
                #if $ip != "":
  <admin-interface name="$iname" proto="static">
   <ipaddr>$ip</ipaddr>
                    #if $netmask != "":
   <subnet>$netmask</subnet>
                    #end if
                #end if
                #if $gateway != "":
   <gateway>$gateway</gateway>
  </admin-interface>
                #else
  </admin-interface>
                #end if
                #if $name_servers and $name_servers[0] != "":
                    ## Anaconda only allows one nameserver
  <name-server>$name_servers[0]</name-server>
                #end if
            #else
  <admin-interface name="$iname" proto="dhcp" />
            #end if
        #else
  <admin-interface name="$iname" proto="dhcp" />
        #end if
        #if $hostname != ""
  <hostname>$hostname</hostname>
        #else
            #set $myhostname = $getVar('name','').replace("_","-")
  <hostname>$myhostname</hostname>
        #end if
    #end for
#else
## profile based install so just provide one interface for starters
#set $myhostname = $getVar('hostname',$getVar('name','cobbler')).replace("_","-")
  <admin-interface name="eth0" proto="dhcp" />
  <hostname>$myhostname</hostname>
#end if
